import requests
from bs4 import BeautifulSoup as bs
import json
import re

url ='https://www.toutiao.com/search_content/?offset=20&format=json&keyword=%E8%A1%97%E6%8B%8D&autoload=true&count=20&cur_tab=3&from=gallery&pd='

def get_one_url(url):
	headers={
		'User-Agent':'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36'
	}
	response = requests.get(url,headers = headers)
	if response.status_code == 200:
		return response.text
	else:
		return None

def parse_html_json(html):
	result = json.loads(html)
	if result and 'data' in result.keys():
		for data in result['data']:
			item = {}
			item['pages'] = data['gallary_image_count']
			item['group_id'] = data['group_id']
			yield item

def get_picture_url(pictureurl):
	headers={
		'User-Agent':'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36'
	}
	url = 'https://www.toutiao.com/a{group_id}'
	for i in range(1, pictureurl['pages'] + 1):
		page_url = url.format(group_id = pictureurl['group_id'], page = i)
		print(page_url)
		yield requests.get(page_url, headers = headers)

def parse_picture_page_test(html):
	print(html.text) #在这直接就变了。从4af000dfa101d026d66直接变成tuchong.fullscreen\\/22386918_tt了。所以解析结果都不对了
	#测试了一下，从浏览器直接复制过来的话，可以直接用json解析
	#dict_image='{\"count\":18,\"sub_images\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/6a09170432564036b42ccb91677b99a7\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/6a09170432564036b42ccb91677b99a7\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/6a09170432564036b42ccb91677b99a7\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/6a09170432564036b42ccb91677b99a7\"}],\"uri\":\"origin\\/pgc-image\\/6a09170432564036b42ccb91677b99a7\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/221c7beb5b274c28a66e2807d1e5d445\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/221c7beb5b274c28a66e2807d1e5d445\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/221c7beb5b274c28a66e2807d1e5d445\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/221c7beb5b274c28a66e2807d1e5d445\"}],\"uri\":\"origin\\/pgc-image\\/221c7beb5b274c28a66e2807d1e5d445\",\"height\":1049},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/b5b672ba5dac4bc6a5b1a5319a596564\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/b5b672ba5dac4bc6a5b1a5319a596564\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/b5b672ba5dac4bc6a5b1a5319a596564\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/b5b672ba5dac4bc6a5b1a5319a596564\"}],\"uri\":\"origin\\/pgc-image\\/b5b672ba5dac4bc6a5b1a5319a596564\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/ed7ef1d500b742e6909307dbf0e6fa3f\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/ed7ef1d500b742e6909307dbf0e6fa3f\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/ed7ef1d500b742e6909307dbf0e6fa3f\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/ed7ef1d500b742e6909307dbf0e6fa3f\"}],\"uri\":\"origin\\/pgc-image\\/ed7ef1d500b742e6909307dbf0e6fa3f\",\"height\":1049},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/23e376334241401c8faf78c93a10bf5b\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/23e376334241401c8faf78c93a10bf5b\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/23e376334241401c8faf78c93a10bf5b\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/23e376334241401c8faf78c93a10bf5b\"}],\"uri\":\"origin\\/pgc-image\\/23e376334241401c8faf78c93a10bf5b\",\"height\":1049},{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/pgc-image\\/e7e84001dd5c40428f7aa22e11bc6764\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/pgc-image\\/e7e84001dd5c40428f7aa22e11bc6764\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/e7e84001dd5c40428f7aa22e11bc6764\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/e7e84001dd5c40428f7aa22e11bc6764\"}],\"uri\":\"origin\\/pgc-image\\/e7e84001dd5c40428f7aa22e11bc6764\",\"height\":1049},{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/pgc-image\\/71777fbcfde544af9095b032f9db4492\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/pgc-image\\/71777fbcfde544af9095b032f9db4492\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/71777fbcfde544af9095b032f9db4492\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/71777fbcfde544af9095b032f9db4492\"}],\"uri\":\"origin\\/pgc-image\\/71777fbcfde544af9095b032f9db4492\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/fb9855fe548e4a4da73514c502046429\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/fb9855fe548e4a4da73514c502046429\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/fb9855fe548e4a4da73514c502046429\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/fb9855fe548e4a4da73514c502046429\"}],\"uri\":\"origin\\/pgc-image\\/fb9855fe548e4a4da73514c502046429\",\"height\":1049},{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/pgc-image\\/dcc03ec8a3814184ad0be51f0ff8ef90\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/pgc-image\\/dcc03ec8a3814184ad0be51f0ff8ef90\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/dcc03ec8a3814184ad0be51f0ff8ef90\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/dcc03ec8a3814184ad0be51f0ff8ef90\"}],\"uri\":\"origin\\/pgc-image\\/dcc03ec8a3814184ad0be51f0ff8ef90\",\"height\":1049},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/b0b0f94ca601432d9bc00af693aa03fb\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/b0b0f94ca601432d9bc00af693aa03fb\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/b0b0f94ca601432d9bc00af693aa03fb\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/b0b0f94ca601432d9bc00af693aa03fb\"}],\"uri\":\"origin\\/pgc-image\\/b0b0f94ca601432d9bc00af693aa03fb\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/926a560c628942dfa86bd3163d9e248a\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/926a560c628942dfa86bd3163d9e248a\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/926a560c628942dfa86bd3163d9e248a\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/926a560c628942dfa86bd3163d9e248a\"}],\"uri\":\"origin\\/pgc-image\\/926a560c628942dfa86bd3163d9e248a\",\"height\":1049},{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/pgc-image\\/22c885e8365f493fb9731686b54da336\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/pgc-image\\/22c885e8365f493fb9731686b54da336\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/22c885e8365f493fb9731686b54da336\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/22c885e8365f493fb9731686b54da336\"}],\"uri\":\"origin\\/pgc-image\\/22c885e8365f493fb9731686b54da336\",\"height\":1049},{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/pgc-image\\/f6e9dc0ada3d4c56a7e58f226b7161e5\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/pgc-image\\/f6e9dc0ada3d4c56a7e58f226b7161e5\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/f6e9dc0ada3d4c56a7e58f226b7161e5\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/f6e9dc0ada3d4c56a7e58f226b7161e5\"}],\"uri\":\"origin\\/pgc-image\\/f6e9dc0ada3d4c56a7e58f226b7161e5\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/f3500d0d73c2464aa294c48520a094be\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/f3500d0d73c2464aa294c48520a094be\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/f3500d0d73c2464aa294c48520a094be\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/f3500d0d73c2464aa294c48520a094be\"}],\"uri\":\"origin\\/pgc-image\\/f3500d0d73c2464aa294c48520a094be\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/97571942b37640129e109c11c9e8ac23\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/97571942b37640129e109c11c9e8ac23\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/97571942b37640129e109c11c9e8ac23\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/97571942b37640129e109c11c9e8ac23\"}],\"uri\":\"origin\\/pgc-image\\/97571942b37640129e109c11c9e8ac23\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/da77cee79f7e40c8bc61307742b52f77\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/da77cee79f7e40c8bc61307742b52f77\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/da77cee79f7e40c8bc61307742b52f77\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/da77cee79f7e40c8bc61307742b52f77\"}],\"uri\":\"origin\\/pgc-image\\/da77cee79f7e40c8bc61307742b52f77\",\"height\":1049},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/d1d4e76606374b8799d8b1efb200359c\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/pgc-image\\/d1d4e76606374b8799d8b1efb200359c\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/pgc-image\\/d1d4e76606374b8799d8b1efb200359c\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/d1d4e76606374b8799d8b1efb200359c\"}],\"uri\":\"origin\\/pgc-image\\/d1d4e76606374b8799d8b1efb200359c\",\"height\":1049},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/724ebaf9d9d744b3acbf58680eeb58ea\",\"width\":800,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/pgc-image\\/724ebaf9d9d744b3acbf58680eeb58ea\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/pgc-image\\/724ebaf9d9d744b3acbf58680eeb58ea\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/pgc-image\\/724ebaf9d9d744b3acbf58680eeb58ea\"}],\"uri\":\"origin\\/pgc-image\\/724ebaf9d9d744b3acbf58680eeb58ea\",\"height\":1050}],\"max_img_width\":800,\"labels\":[\"\\u7f8e\\u5973\"],\"sub_abstracts\":[\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],\"sub_titles\":[\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\",\"\\u7f8e\\u5973\\u56fe\\u7247 \\u798f\\u5229\\u4e0d\\u65ad\"]}'
	dict_image = '{\"count\":20,\"sub_images\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386906_tt\",\"width\":4608,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386906_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386906_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386906_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386906_tt\",\"height\":3072},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386910_tt\",\"width\":1229,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386910_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386910_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386910_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386910_tt\",\"height\":865},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386907_tt\",\"width\":4608,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386907_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386907_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386907_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386907_tt\",\"height\":3072},{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386900_tt\",\"width\":1332,\"url_list\":[{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386900_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386900_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386900_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386900_tt\",\"height\":899},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386899_tt\",\"width\":878,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386899_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386899_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386899_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386899_tt\",\"height\":876},{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386903_tt\",\"width\":1440,\"url_list\":[{\"url\":\"http:\\/\\/p1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386903_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386903_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386903_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386903_tt\",\"height\":900},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386915_tt\",\"width\":1440,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386915_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386915_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386915_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386915_tt\",\"height\":900},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386908_tt\",\"width\":1344,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386908_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386908_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386908_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386908_tt\",\"height\":857},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386909_tt\",\"width\":1440,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386909_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386909_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386909_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386909_tt\",\"height\":900},{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386916_tt\",\"width\":1440,\"url_list\":[{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386916_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386916_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386916_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386916_tt\",\"height\":900},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386918_tt\",\"width\":1337,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386918_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386918_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386918_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386918_tt\",\"height\":869},{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386905_tt\",\"width\":1347,\"url_list\":[{\"url\":\"http:\\/\\/p9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386905_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386905_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386905_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386905_tt\",\"height\":871},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386917_tt\",\"width\":1440,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386917_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386917_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386917_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386917_tt\",\"height\":900},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386919_tt\",\"width\":1340,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386919_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386919_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386919_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386919_tt\",\"height\":870},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386920_tt\",\"width\":1282,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386920_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386920_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386920_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386920_tt\",\"height\":824},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386912_tt\",\"width\":1335,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386912_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386912_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386912_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386912_tt\",\"height\":892},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386898_tt\",\"width\":869,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386898_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386898_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386898_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386898_tt\",\"height\":869},{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386913_tt\",\"width\":1343,\"url_list\":[{\"url\":\"http:\\/\\/p99.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386913_tt\"},{\"url\":\"http:\\/\\/pb3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386913_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386913_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386913_tt\",\"height\":900},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386911_tt\",\"width\":1340,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386911_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386911_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386911_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386911_tt\",\"height\":873},{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386914_tt\",\"width\":1238,\"url_list\":[{\"url\":\"http:\\/\\/p3.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386914_tt\"},{\"url\":\"http:\\/\\/pb9.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386914_tt\"},{\"url\":\"http:\\/\\/pb1.pstatp.com\\/origin\\/tuchong.fullscreen\\/22386914_tt\"}],\"uri\":\"origin\\/tuchong.fullscreen\\/22386914_tt\",\"height\":875}],\"max_img_width\":4608,\"labels\":[\"\\u6444\\u5f71\"],\"sub_abstracts\":[\" \\u6444\\u5f71\\uff1a\\u6de1\\u7136\\u5982\\u5170\",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],\"sub_titles\":[\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\",\"\\u56fe\\u866b\\u8857\\u62cd\\u6444\\u5f71\\uff1a2017.12.19\\u4e4b\\u8857\\u62cd\"]}'
	print(json.loads(dict_image))

#不会解析script里面的一段json格式的字符(JSON.parse括号里面)，解析出来的不是自己想要的
#可能是编码问题，不太清楚
def parse_picture_page(html):
	#利用bs解析
	soup = bs(html.text,'lxml')
	dict_image = soup.select('script')[6].get_text()[16:] #从4af000dfa101d026d66直接变成tuchong.fullscreen\\/22386918_tt了??
	print(dict_image)
	dict_image = json.loads(dict_image)
	print(dict_image)

	#利用正则解析
	# pattern = re.compile(r'JSON.parse(.*?)siblingList',re.S)
	# result = re.search(pattern, html.text)
	# print(result.group(1).strip())
	# result_json = str(result.group(1).strip()[2:-3])
	# print(result_json)
	# print(type(result_json))
	# result_json = json.loads(result_json)#把返回结果复制后，再转化为json格式，没有问题
	# print(result_json)

def main():
	# html = get_one_url(url)
	# result = parse_html_json(html)
	html = get_picture_url({'pages': 1, 'group_id': '6502155184557261325'})
	for page in html:
		#print(page)
		parse_picture_page_test(page)

if __name__ == '__main__':
	main()